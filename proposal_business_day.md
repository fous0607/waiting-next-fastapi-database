# 매장별 영업일 및 마감 정책 개선 제안서

현재 양산중부점에서 발생한 "자정 이후 대기자 사라짐" 현상은 시스템의 영업일 기준 시간이 고정되어 있어 발생한 문제입니다.
고객님께서 제안해주신 3가지 운영 방식을 모두 지원하면서도, 시스템 데이터(매출, 통계)의 정확성을 보장하는 **"가장 안전하고 유연한 해결책"**을 제안드립니다.

## 💡 추천 솔루션: "영업 기준 시간(Business Day Cutoff)" 설정 도입

모든 매장에 일률적인 기준을 적용하는 대신, **매장 설정**에서 점주님이 직접 **"하루의 시작과 끝"**을 결정하도록 합니다.

### 설정 항목 추가 (제안)
매장 설정 페이지에 다음 두 가지 옵션을 추가합니다.

1.  **영업 마감 기준 시간 (Cutoff Time):**
    *   하루 영업을 마감하고 날짜를 넘기는 기준 시간입니다.
    *   선택지: `00:00 (자정)`, `03:00`, `05:00 (기본값)`, `06:00` 등
2.  **자동 마감 사용 여부:**
    *   기준 시간이 되었을 때 시스템이 '강제 마감' 처리를 할지 여부입니다.

---

## 📋 시나리오별 운영 방식

고객님의 3가지 요구사항을 이 시스템으로 완벽하게 구현할 수 있습니다.

### 1. 자정이 넘어가면 자동 마감 (일반 식당/카페)
*   **설정:** 기준 시간 `00:00` / 자동 마감 `ON`
*   **동작:** 밤 12시가 땡 하면 시스템 날짜가 바뀝니다. 만약 마감 처리를 안 했더라도 시스템이 자동으로 마감 처리하고 새 날짜로 시작합니다.

### 2. 새벽 5시에 날짜 갱신 (심야 식당/술집) - *현재 적용 방식*
*   **설정:** 기준 시간 `05:00` / 자동 마감 `ON`
*   **동작:** 새벽 2시에 들어온 손님도 '어제' 손님으로 계산됩니다. 새벽 5시가 되면 날짜가 넘어가고 자동 마감됩니다.

### 3. 마감 전까지 무조건 유지 (24시간/불규칙 운영) - *가장 주의 필요*
*   **설정:** 기준 시간 `06:00` (손님이 가장 적은 시간) / 자동 마감 `OFF`
*   **동작:** 날짜가 넘어가도 강제로 마감하지 않습니다.
*   **⚠️ 전문가 조언:** "날짜 무한 유지"는 통계(일별 매출)를 망가뜨리는 주범입니다. 3일치를 하루 매출로 잡으면 안 되니까요.
*   **대안 솔루션:** **"대기자 이월(Carry Over)" 기능**을 적용합니다. 날짜는 시스템상 바뀌더라도(통계를 위해), **"아직 처리되지 않은 대기자"는 다음 날짜 대기 목록으로 자동으로 넘겨줍니다.** 이렇게 하면 점주님 입장에서는 대기자가 유지되는 것처럼 보이고, 시스템 데이터는 꼬이지 않습니다.

---

## ✅ 최종 제안 및 진행 방향

가장 추천드리는 방식은 **[영업 기준 시간 설정 + 대기자 이월 기능]** 조합입니다.

1.  **Store Settings 테이블 업데이트:** `daily_start_time`(기준 시간) 컬럼 추가
2.  **매장 설정 UI 구현:** 점주님이 직접 시간을 선택할 수 있는 드롭다운 메뉴 추가
3.  **날짜 계산 로직 고도화:** `utils.py`가 매장별 설정을 실시간으로 반영하도록 수정

이 방식으로 진행 시, **양산중부점**처럼 새벽 영업을 하는 곳은 `05:00`로, **일반 매장**은 `00:00`로 설정하여 각자 환경에 맞게 완벽하게 운영할 수 있습니다.

**이 제안대로 시스템 업그레이드를 진행할까요?**
