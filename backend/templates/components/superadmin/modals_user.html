<!-- Add User Modal (Add Admin) -->
<div id="addAdminModal" class="modal-overlay">
    <div class="modal-content" style="width: 520px;">
        <i class="fas fa-times close-modal" onclick="closeModal('addAdminModal')"></i>
        <div class="modal-title">관리자 계정 생성</div>
        <div id="addAdminTargetName"
            style="margin-bottom: 24px; font-weight: 700; color: var(--toss-blue); border-bottom: 1px solid var(--toss-gray-100); padding-bottom: 12px;">
        </div>

        <form id="addAdminForm">
            <input type="hidden" id="addAdminFranchiseId">

            <div class="input-group">
                <label class="input-label">로그인 아이디</label>
                <input type="text" id="adminUsername" class="toss-input" placeholder="로그인에 사용할 ID" required>
            </div>

            <div class="input-group">
                <label class="input-label">비밀번호</label>
                <input type="password" id="adminPassword" class="toss-input" placeholder="비밀번호 설정" required>
            </div>

            <div class="input-group">
                <label class="input-label">역할 권한</label>
                <select id="adminRole" class="toss-input" onchange="toggleStoreSelect()" required>
                    <option value="franchise_admin">프랜차이즈 관리자/본사 (모든 매장)</option>
                    <option value="franchise_manager">멀티 매장 점장 (선택 매장 관리)</option>
                    <option value="store_admin">단일 매장 점주 (한 개 매장)</option>
                </select>
            </div>

            <div id="singleStoreDiv" class="input-group"
                style="display: none; padding: 16px; background: var(--toss-gray-50); border-radius: 12px;">
                <label class="input-label">관리 매장 선택</label>
                <select id="adminStoreId" class="toss-input">
                    <option value="">매장 선택</option>
                </select>
            </div>

            <div id="multiStoreDiv" class="input-group"
                style="display: none; padding: 16px; background: var(--toss-gray-50); border-radius: 12px;">
                <label class="input-label">멀티 관리 매장 선택</label>
                <div id="multiStoreContainer"
                    style="max-height: 180px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px;">
                    <!-- Checkboxes populated by JS -->
                </div>
            </div>

            <div class="modal-actions" style="margin-top: 40px;">
                <button type="button" class="toss-btn toss-btn-secondary"
                    onclick="closeModal('addAdminModal')">취소</button>
                <button type="submit" class="toss-btn toss-btn-primary">계정 생성</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit User Modal -->
<div id="editUserModal" class="modal-overlay">
    <div class="modal-content" style="width: 520px;">
        <i class="fas fa-times close-modal" onclick="closeModal('editUserModal')"></i>
        <div class="modal-title">사용자 권한 및 정보 수정</div>

        <form id="editUserForm">
            <input type="hidden" id="editUserId">

            <div class="input-group">
                <label class="input-label">로그인 아이디</label>
                <input type="text" id="editUserUsername" class="toss-input" readonly
                    style="background-color: var(--toss-gray-100); cursor: not-allowed;">
            </div>

            <div class="input-group">
                <label class="input-label">비밀번호 변경</label>
                <input type="password" id="editUserPassword" class="toss-input" placeholder="미입력 시 기존 비밀번호 유지">
            </div>

            <div class="input-group">
                <label class="input-label">활성화 여부</label>
                <label
                    style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px; background: var(--toss-gray-50); border-radius: 8px;">
                    <input type="checkbox" id="editUserIsActive" style="width: 18px; height: 18px;">
                    <span style="font-weight: 600; font-size: 15px;">이 계정을 활성 상태로 유지</span>
                </label>
            </div>

            <div class="input-group">
                <label class="input-label">역할 권한</label>
                <select id="editUserRole" class="toss-input" onchange="toggleEditUserStoreSelect()" required>
                    <option value="system_admin">슈퍼관리자</option>
                    <option value="franchise_admin">프랜차이즈 관리자</option>
                    <option value="franchise_manager">멀티 매장 점장</option>
                    <option value="store_admin">단일 매장 점주</option>
                </select>
            </div>

            <div id="editUserFranchiseGroup" class="input-group" style="display: none;">
                <label class="input-label">소속 프랜차이즈</label>
                <select id="editUserFranchiseId" class="toss-input">
                    <option value="">프랜차이즈 선택</option>
                </select>
            </div>

            <div id="editUserStoreGroup" class="input-group"
                style="display: none; padding: 16px; background: var(--toss-gray-50); border-radius: 12px;">
                <label class="input-label">단일 매장 선택</label>
                <select id="editUserStoreId" class="toss-input">
                    <option value="">매장 선택</option>
                </select>
            </div>

            <div id="editUserMultiStoreGroup" class="input-group"
                style="display: none; padding: 16px; background: var(--toss-gray-50); border-radius: 12px;">
                <label class="input-label">멀티 매장 선택</label>
                <div id="editUserMultiStoreContainer"
                    style="max-height: 180px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px;">
                    <!-- Checkboxes populated by JS -->
                </div>
            </div>

            <div class="modal-actions" style="margin-top: 40px;">
                <button type="button" class="toss-btn toss-btn-secondary"
                    onclick="closeModal('editUserModal')">취소</button>
                <button type="submit" class="toss-btn toss-btn-primary">수정 완료</button>
            </div>
        </form>
    </div>
</div>

<!-- Confirm User Status Modal -->
<div id="confirmUserStatusModal" class="modal-overlay">
    <div class="modal-content" style="width: 400px; text-align: center;">
        <div class="modal-title" style="margin-bottom: 12px;">사용자 상태 변경</div>
        <div id="userStatusConfirmMessage"
            style="font-size: 16px; color: var(--toss-gray-700); margin-bottom: 32px; line-height: 1.5;"></div>
        <div class="modal-actions" style="justify-content: center; gap: 12px;">
            <button type="button" class="toss-btn toss-btn-secondary"
                onclick="closeModal('confirmUserStatusModal')">취소</button>
            <button type="button" id="btnConfirmUserStatus" class="toss-btn toss-btn-primary"
                onclick="confirmUserStatusChange()">확인</button>
        </div>
    </div>
</div>