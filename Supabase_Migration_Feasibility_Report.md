# Supabase 전환 검토 분석 보고서

대기자 관리 프로그램의 데이터베이스를 현재 SQLite에서 **Supabase (PostgreSQL)**로 전환하는 것에 대한 기술적 타당성을 검토한 결과, **매우 긍정적이며 전환이 용이한 상태**로 분석되었습니다.

## 1. 기술적 타당성 분석

현재 백엔드 아키텍처는 이미 다중 데이터베이스(SQLite 및 PostgreSQL)를 고려하여 설계되어 있습니다.

| 검토 항목 | 현황 및 분석 결과 | 타당성 |
| :--- | :--- | :--- |
| **ORM (SQLAlchemy)** | 모델 정의가 범용적인 SQLAlchemy 코드로 작성되어 데이터베이스 전환 시 코드 수정이 거의 필요 없습니다. | **최상** |
| **PostgreSQL 지원** | `database.py`에 이미 PostgreSQL 연결을 위한 환경 변수 처리 및 타임존 설정 로직이 포함되어 있습니다. | **최상** |
| **방언(Dialect) 호환성** | 통계 로직(`statistics.py`) 등 소수의 위치에서만 SQLite/PostgreSQL 전용 함수(`strftime` vs `to_char`)를 구분하여 이미 구현해 두었습니다. | **상** |
| **자동 마이그레이션** | 기존의 `db_auto_migrator.py`가 PostgreSQL의 `ALTER TABLE` 구문과도 호환되도록 설계되어 있습니다. | **상** |

## 2. Supabase 도입 시 이점

1. **클라우드 관리형 DB**: 서버 내 로컬 파일(SQLite) 관리 부담이 사라지고, 안정적인 고성능 PostgreSQL 환경을 사용할 수 있습니다.
2. **실시간성 강화**: Supabase의 Realtime 기능을 활용하면 현재의 SSE(Server-Sent Events)를 보완하거나 더 효율적으로 개선할 수 있습니다.
3. **스케일링**: 여러 매장의 데이터를 통합 관리하거나 트래픽이 증가할 때 유연하게 대응할 수 있습니다.
4. **인증 및 스토리지 통합**: 필요시 Supabase Auth나 Storage를 사용하여 회원 관리 및 첨부파일 기능을 확장하기 용이합니다.

## 3. 전환 시 예상되는 주요 작업

1. **Supabase 프로젝트 생성**: Supabase에서 새 프로젝트를 생성하고 연결 문자열(Connection String)을 확보합니다.
2. **환경 변수 설정**: `DATABASE_URL`을 Supabase에서 제공하는 PostgreSQL 주소로 업데이트합니다.
3. **데이터 이전 (선택 사항)**: 기존 SQLite에 쌓여있는 운영 데이터를 Supabase로 마이그레이션합니다. (새로 개점 시에는 불필요)
4. **엄격한 데이터 타입 대응**: SQLite는 데이터 타입에 관대하지만, PostgreSQL은 엄격합니다. 일부 잘못된 데이터 입력 로직이 있을 경우 빌드/실행 시 체크가 필요할 수 있습니다.

## 4. 결론

현재 시스템은 **언제든지 Supabase로 전환할 수 있는 준비가 완료**되어 있습니다. 

단순히 `DATABASE_URL` 설정만 변경해도 기본 동작이 가능할 정도로 구조가 유연합니다. 실제 운영 환경의 안정성과 확장성을 고려한다면 **Supabase로의 전환을 강력히 추천**합니다.
